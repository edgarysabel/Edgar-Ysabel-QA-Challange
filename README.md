# QA Automation Challenge

This is an automation framework designed to test the website (UI Test) [automationpractice.com/](http://automationpractice.com/index.php) and Marvel API which can be found in [developer.marvel.com/docs/](https://developer.marvel.com/docs).

### UI testing

The test cases have been documented in platform [qatouch.com](https://www.qatouch.com/). To access the test suite, can reach me at:
edgarysabel@gmail.com. These were the scenerios documented as well as automated:

    1. Sign up.

    2. Login.

    3. Logout.

    4. Search Item.

    5. Subscribe to newsletter.

    6. Add item to shopping cart.

    7. Checkout.

    8. Delete item from shopping cart.

    9. Add message to order.

    10. Contact Us.

### API testing

For API Testing, 3 scenarios where automated:

    1. Automate that all the characters can be fetch.

    2. Automate that all the comics for Spiderman can be fetch.

    3. Automate that all characters for the X-Man comic can be fetch

## Run Locally

#### Required to run project

- [Node.js](https://nodejs.org/en/download/)

- Must have a Marvel Private Key and Public Key which can be obtained going to [Marvel's developer website](https://developer.marvel.com) and creating a new account.

- An email and password is needed for [automationpractice.com/](http://automationpractice.com/index.php).

  `Note: Both Marvels Keys and Account for UI testing are being included in Main branch, feel free to use this or generate new ones.`

###

- Clone repository:

```bash
  git clone https://github.com/edgarysabel/Edgar-Ysabel-QA-Challange.git
```

- Install dependencies:

```bash
  npm install
```

- Run project in headless mode:

```bash
  npm run cy:run
```

- Run project in headed mode:

```bash
  npm run cy:open
```

This will run all the tests and generate a report at the end of the execution.

###

Note: local testing is configured to run on Mac/Linux based environments. If running in a windows machine please go to package.json under root directory and replace:

```bash
  "cy:open": "yarn cypress open --env allure=true --browser chrome",
  "cy:run": "yarn cypress run --config video=false --env allure=true --browser chrome",
```

for:

```bash
  "cy:open": "npx cypress open --env allure=true --browser chrome",
  "cy:run": "npx cypress run --config video=false --env allure=true --browser chrome",
```

## Run CI

CI has been configured with Github Actions for ease of use and integration since project is already hosted on Github. To run it just go to actions and run the workflow `Allure-report` under your preferred Branch. Aditionally, pipeline always run whenever there is a new commit.

Note: To be able to do commits or run workflows please reach me at edgarysabel@gmail.com.

#### Test Reports

Test report have been done with Allure Report and stored with GitHub Pages, so pipeline is run, the reports are generated along it. To access reports go to [edgarysabel.github.io/Edgar-Ysabel-QA-Challange/allure-report](https://edgarysabel.github.io/Edgar-Ysabel-QA-Challange/allure-report).

## Project Structure

#### UI testing configuration

The file cypress.env.json under root directory contains needed credentails for UI testing. Working credentials are currently included with the project.

```bash
  {
  "FRONTEND_URL": "http://automationpractice.com/index.php",
  "USER": "email@mail.com",
  "PASSWORD": "password"
   }
```

#### API testing configuration

Under directory `cypress/support`, file api.js contains the properties `apiDetails.publicKey` and `apiDetails.privateKey`,
which are the needed keys to access the API. You can replace them with the ones obtained from [Marvel's developer website](https://developer.marvel.com) after creating the account.

```bash
    apiDetails.publicKey = "Marvel Public Key";
    apiDetails.privateKey = "Marvel Private Key";
```

Note: required hash is being generated by using the [MD5 library](https://www.npmjs.com/package/md5) in this same file.

```bash
  apiDetails.ts = date.getTime();
  apiDetails.hash = md5(apiDetails.ts + apiDetails.privateKey + apiDetails.publicKey);
```

## Must Know

- For API invalid scenarios was used `failOnStatusCode: false`, so it continues and do the assertions.

- A custom POM Pattern with Javascript and Cypress was used.

- The static data is stored on `fixture` for each test case.

- The website [automationpractice.com](http://automationpractice.com/index.php) has loading issues and can make tests fail.

# QA Automation Challenge

This is an automation framework designed to the website (UI Test) [automationpractice.com/](http://automationpractice.com/index.php) and Marvel API which can be found in [developer.marvel.com/docs/](https://developer.marvel.com/docs).

### UI testing

The test cases have been documented in platform [qatouch.com](https://www.qatouch.com/). To access the test suite, can reach me at:
edgarysabel@gmail.com

    1. Sign up.

    2. Login.

    3. Logout.

    4. Search Item.

    5. Subscribe to newsletter.

    6. Add item to shopping cart.

    7. Checkout.

    8. Delete item from shopping cart.

    9. Add message to order.

    10. Contact Us.

### API testing

For API Testing, 3 scenarios where automated:

1. Automate that all the characters can be fetch.

2. Automate that all the comics for Spiderman can be fetch.

3. Automate that all characters for the X-Man comic can be fetch

## Required to run project

- Node.js

- Must have a Marvel Private Key and Public Key which can be obtained going to [Marvel's developer website](https://developer.marvel.com) and creating a new account.

- An email and password is needed for [automationpractice.com/](http://automationpractice.com/index.php).

`Note: Both Marvels Keys and Account for UI testing are being included in Main pipeline run, feel free to use this or generate new ones.`

## Run Locally

- Clone the repository into your preferred directory through HTTP:

```bash
  git clone https://github.com/edgarysabel/Edgar-Ysabel-QA-Challange.git
```

- Install all dependencies needed for the project.

```bash
  npm i
```

- Run project in headless mode:

```bash
  npm run cy:run
```

- Run project in headed mode:

```bash
  npm run cy:open
```

Note: local testing is configured to run on Mac/Linux based environments. If running in a windows machine please go to package.json and replace:

```bash
  "cy:open": "yarn cypress open --env allure=true --browser chrome",
```

for:

```bash
  "cy:open": "npx cypress open --env allure=true --browser chrome",
```

And cy:run as well:

```
"cy:run": "yarn cypress run --config video=false --env allure=true --browser chrome"
```

for:

```
"cy:run": "npx cypress run --config video=false --env allure=true --browser chrome"
```

## Run CI

CI

## Project Structure

#### UI testing configuration

The file cypress.env.json under root directory contains needed credentails for UI testing. Working credentials are currently included with the project.

```bash
  {
  "FRONTEND_URL": "http://automationpractice.com/index.php",
  "USER": "myemail@mail.com",
  "PASSWORD": "mypassword"
   }
```

#### API testing configuration

Go to directory `cypress/support/utilities` , open the file apiHelper.js and modify the properties `apiData.publicKey` and `apiData.privateKey`,
replacing the values with the ones gotten from [Marvel's developer website](https://developer.marvel.com) after creating the account.

```bash
    apiData.publicKey = "my marvel public key goes here";
    apiData.privateKey = "my marvel private key goes here";
```

The required hash and timestamp are being generated by using the [MD5 library](https://www.npmjs.com/package/md5) and programatically on the same apiHelper.js file.

```bash

   const date = new Date();
   apiData.timestamp = date.getTime();

   apiData.hash = md5(apiData.timestamp + apiData.privateKey + apiData.publicKey);
```

- Run the tests using the cypress Test Runner by typing on the terminal the command:

```bash
   npx cypress open
```

- Run the tests on headless mode by typing on the terminal the command:

```bash
   npm run test
```

This will automatically run all test and generate the report at the end of execution.

## Must Know

- The website [automationpractice.com](http://automationpractice.com/index.php) has load issues and this make some of the test fail sometimes.
- For API negative test cases was used `failOnStatusCode: false` , so it can continue and do the assertions.

## Considerations

- It was used the POM dessign pattern combined with Javascript and cypress best practices.

- Reusable features like Login and Logout were created as a custom command for cypress, so can be used when need it.

- The static data was created on `fixture` but the dynamic data was generated using [fakerjs](https://www.npmjs.com/package/faker), creating variables in a custom helper file.

- All `validation data for assertions` such as `(URLs and confirmation messages )`, were saved in the cypress.json/env.

- The CI pipeline is configured through a Circle CI orbs.

- All The API successfull requests for positive scenarios were also validated using the [postman](https://www.postman.com/) tool and the collection will be included in the project just in case that is required to validate some information.

- To test with postman or other third party, will be required to get a hash that can be generated by going to [Hash generator](https://www.md5hashgenerator.com/) and doing the following steps:

  1.  Go to the [Hash generator](https://www.md5hashgenerator.com/) website.

  2.  On the text-area field paste the API keys preceded by the number `1` that will works as a `Timestamp`.

  ```bash
   ` 1 + Marvel's API privateKey + Marvel's API publicKey`
  ```

  3.  Click the generate button to get the hash required for API testing.

## Contributing

Contributions are always welcome!

- Feel free of fork this project, create your own branch, commit your changes and do your pull request.

## Acknowledgements

- [Cypress.io](https://docs.cypress.io/guides/overview/why-cypress)
- [NPMjs.com](https://www.npmjs.com/)
- [Circleci Documentation](https://circleci.com/developer/orbs/orb/cypress-io/cypress#usage-start-server)

## 🔗 Links

[![Profile](https://img.shields.io/badge/my_portfolio-000?style=for-the-badge&logo=ko-fi&logoColor=white)](https://github.com/elraffy)

[![linkedin](https://img.shields.io/badge/linkedin-0A66C2?style=for-the-badge&logo=linkedin&logoColor=white)](https://www.linkedin.com/in/raffy-a-rodriguez-400552110/)
